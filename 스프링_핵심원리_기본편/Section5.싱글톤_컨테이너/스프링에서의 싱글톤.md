# 스프링에서의 싱글톤

참고 → 토비의 스프링1

### **애플리케이션 컨텍스트**는 **싱글톤 레지스트리**다

엔터프라이즈 어플리케이션에서의 서비스 오브젝트 개념

ex. 서블릿에서의 싱글톤 개념

서블릿 하나 당 하나의 오브젝트

사용자의 요청을 담당하는 여러 스레드에서 하나의 오브젝트를 공유하여 동시사용

### 스프링 컨테이너에서 싱글톤 개념이 갖는 장점

- private 생성자 사용 X → public 생성자 사용 O → **Test 용이**
- 생성, 관계 설정, 사용 등의 **제어권을 관리**

### 멀티스레드 환경에서의 싱글톤

→ 여러 스레드에서 동시에 객체에 접근하기 때문에 발생하는 다양한 문제점

- 멀티스레드 환경에서는 싱글톤은 상태정보를 가지면 안됨(Stateless)

    다중 사용자의 요청 때문에 위험

    읽기 전용 값을 공유하는 것은 OK

- 파라미터, 로컬 변수, 리턴 값을 활용함

    로컬 변수의 경우에는 메서드 안(stack 영역 내부)에 생성되기에 상태정보를 독립된 공간에서 사용/관리 가능

### 추가 개념

- 싱글톤 스코프
- 프로토타입 스코프 → 컨테이너에 빈 요청시마다 매번 새로운 오브젝트를 생성
- 요청 스코프 (HTTP)
- 세션 스코프 (Session)
